\section{Archivos}

\begin{frame}[t,fragile]{Flujos de archivo}
\begin{itemize}
  \item Tipos de flujos para archivos:
    \begin{itemize}
      \item \cppid{ofstream}: Es un \cppid{ostream} para escribir en un fichero.
      \item \cppid{ifstream}: Es un \cppid{istream} para leer de un fichero.
    \end{itemize}
  \vfill

  \mode<presentation>{\vfill\pause}  
  \item Necesitan construirse con un nombre de archivo.
\begin{lstlisting}
ofstream fsalida{"salida.txt"};
ifstream fentrada{"entrada.txt"};
\end{lstlisting}
  \vfill

  \mode<presentation>{\vfill\pause}
  \item Cuando el objeto sale de alcance el archivo se cierra automáticamente.
    \begin{itemize}
      \item Cuando se cierra el archivo se vacía el búfer asociado.
    \end{itemize}
\end{itemize}
\end{frame}

\begin{frame}[t,fragile]{Flujos de archivo}
\begin{itemize}
  \item Aceptan el operador \cppkey{!} para comprobar si el estado es correcto.
\begin{lstlisting}
if (!flujo) { 
  hay_error(); 
}
\end{lstlisting}
  \item Se pueden usar en una condición para comprobar si el estado es correcto.
\begin{lstlisting}
while (flujo >> x) { 
  procesa(x); 
}
\end{lstlisting}
\end{itemize}
\end{frame}

\mode<presentation> {

\begin{frame}[t]
\begin{block}{main.cpp}
\lstinputlisting[lastline=19]{ejemplos/13-iostream/filtro/main.cpp}
\end{block}
\end{frame}

\begin{frame}[t]
\begin{block}{main.cpp}
\lstinputlisting[firstline=21]{ejemplos/13-iostream/filtro/main.cpp}
\end{block}
\end{frame}

}

\mode<article> {
\begin{frame}[t]
\begin{block}{main.cpp}
\lstinputlisting{ejemplos/13-iostream/filtro/main.cpp}
\end{block}
\end{frame}
}

\begin{frame}[t]{Ejemplo}
\begin{itemize}
  \item Archivo con ruta de un vehículo.

  \mode<presentation>{\vfill}
  \item Cada línea contiene:
     \begin{itemize}
       \item Marca de tiempo ascendente (en segundos).
       \item Posición del vehículo: par \cppid{x,y}.
     \end{itemize}

  \mode<presentation>{\vfill}
  \item Calcular:
    \begin{itemize}
      \item Distancia recorrida.
      \item Tiempo empleado.
      \item Velocidad media.
    \end{itemize}
\end{itemize}
\end{frame}

\mode<presentation> {

\begin{frame}[t]
\begin{block}{main.cpp}
\lstinputlisting[lastline=20]{ejemplos/13-iostream/ruta/main.cpp}
\end{block}
\end{frame}

\begin{frame}[t]
\begin{block}{main.cpp}
\lstinputlisting[firstline=22,lastline=41]{ejemplos/13-iostream/ruta/main.cpp}
\end{block}
\end{frame}

\begin{frame}[t]
\begin{block}{main.cpp}
\lstinputlisting[firstline=43]{ejemplos/13-iostream/ruta/main.cpp}
\end{block}
\end{frame}

}

\mode<article> {
\begin{frame}[t]
\begin{block}{main.cpp}
\lstinputlisting{ejemplos/13-iostream/ruta/main.cpp}
\end{block}
\end{frame}
}
